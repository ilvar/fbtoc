<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FB TOC</title>
  <style>
    textarea {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <textarea id="result"></textarea>
  <button id="go">Generate</button>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
  <script>
  function getPosts(username, next) {
    FB.api(next || "/me/posts", "get", {limit: 100}, function(response) {
      if (!response.error && response.data.length) {
        $result = $('#result');
        posts = _.filter(response.data, function(p) { return p.message && p.message.length > 200 });
        data = _.join(_.map(posts, function(p) {
          msg = p.message.slice(0, 75).replace("\n", " ") + "... _" + p.created_time.split("T")[0] + "_";
          path = username + "/posts/" + p.id;
          return "[" + msg +"](https://www.facebook.com/" + path + ")"
        }), '\n')
        $result.val($result.val() + data + "\n");
        setTimeout(function() {
          getPosts(username, response.paging.next);
        }, 100);
      }
    });
  }

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1870833733194976',
      xfbml      : true,
      version    : 'v2.8'
    });

    $("#go").click(function() {
      FB.login(function(response){
        getPosts(response.authResponse.userID);
      }, {scope: 'user_posts'});
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
</body>
</html>