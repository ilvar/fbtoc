<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FB TOC</title>
  <style>
    textarea {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
  <script>
  function getPosts(next) {
    FB.api(next || "/me/posts", "get", {limit: 100}, function(response) {
      if (!response.error && response.data.length) {
        $result = $('#result');
        posts = _.filter(response.data, function(p) { return p.message && p.message.length > $("#threshold").val() });
        data = _.join(_.map(posts, function(p) {
          sentences = p.message.replace(/\n/g, " ").replace(/([.?!])\s*(?=[A-ZА-Я])/g, "$1|").split("|")
          header = sentences[0] + " _" + p.created_time.split("T")[0] + "_";
          rest = ""
          sentences.slice(1).forEach(function(s) {
            if (rest.length < 200) {
              rest += s + " ";
            }
          });
          path = p.id.split("_")[0] + "/posts/" + p.id.split("_")[1];
          return "* [" + header +"](https://www.facebook.com/" + path + ") " + rest;
        }), '\n')
        newVal = $result.val() + "\n" + data + "\n"
        $result.val(newVal.trim());
        setTimeout(function() {
          getPosts(response.paging.next);
        }, 100);
      }
    });
  }
  </script>

  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.8&appId=1870833733194976";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <label>Character count threshold</label>
  <input type="number" id="threshold" placeholder="Enter character count threshold here" value="500" />

  <div>
    Log in and generate:
    <div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="false" onlogin="getPosts();" data-scope="user_posts"></div>
  </div>

  <hr/>

  <textarea id="result" placeholder="Result will appear here (markdown)"></textarea>
</body>
</html>